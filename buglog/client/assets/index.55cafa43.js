import{r as t,c as e,o as a,a as o,b as s,F as r,d as n,S as l,C as c,p as i,e as u,u as d,$ as g,w as p,f as b,v as m,g as h,h as f,t as v,i as y,j as w,k as B,l as x,m as _,n as k,q as T,s as E,x as C,y as A}from"./vendor.4052a4f5.js";const S=t({user:{},account:{},bugs:[],notes:{},thisBug:{},openBugs:[]});const I={name:"App",setup:()=>({appState:e((()=>S))})};I.render=function(t,e,l,c,i,u){const d=n("Navbar"),g=n("router-view");return a(),o(r,null,[s("header",null,[s(d)]),s("main",null,[s(g)])],64)};class O{static async confirm(t="Are you sure?",e="You won't be able to revert this!",a="warning",o="Yes, delete it!"){try{return!!(await l.fire({title:t,text:e,icon:a,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#696969",confirmButtonText:o})).isConfirmed}catch(s){return!1}}static toast(t="Warning!",e="warning",a="top-end",o=3e3,s=!0){l.fire({title:t,icon:e,position:a,timer:o,timerProgressBar:s,toast:!0,showConfirmButton:!1})}}const D=window.location.origin.includes("localhost"),P=D?"http://localhost:3000":"",j=c.create({baseURL:P,timeout:8e3});const N=new class{async getAll(){const t=await j.get("api/bugs");S.bugs=t.data}async getBugById(t){const e=await j.get(`api/bugs/${t}`);S.thisBug=e.data}async createBug(t){const e=await j.post("api/bugs",t);return S.bugs.push(e.data),e.data.id}async editBug(t,e){const a=await j.put(`api/bugs/${e}`,t),o=S.bugs.findIndex((t=>t.id===e));return S.bugs.splice(o,1),S.bugs.push(a.data),S.thisBug=a.data,a.data.id}async closeBug(t){const e=await j.delete(`api/bugs/${t}`),a=S.bugs.findIndex((e=>e.id===t));return S.bugs.splice(a,1),S.bugs.push(e.data),S.thisBug=e.data,e.data.id}};const U={name:"Component",setup(){const e=d(),a=t({createBug:{}});return{state:a,async createBug(){try{const t=await N.createBug(a.createBug);a.createBug={},g("#create-bug").modal("hide"),e.push({name:"BugPage",params:{bugId:t}}),O.toast("Created Project Successfully","success")}catch(t){O.toast(t,"error")}}}}},R=f("data-v-62683ed3");i("data-v-62683ed3");const L={class:"modal fade",id:"create-bug",tabindex:"-1",role:"dialog","aria-labelledby":"create-bug","aria-hidden":"true"},H={class:"modal-dialog",role:"document"},$={class:"modal-content"},q=s("div",{class:"modal-header"},[s("h5",{class:"modal-title"}," Add Bug "),s("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},[s("span",{"aria-hidden":"true"},"×")])],-1),M={class:"modal-body"},z={class:"form-group"},V=s("label",{class:"pr-2",for:"bug-title"},"Bug Title",-1),Y={class:"form-group"},G=s("label",{class:"pr-2",for:"bug-description"},"Description",-1),K={key:0,type:"submit",class:"btn text-dark btn-primary mr-3"},W=s("button",{type:"button",class:"btn btn-secondary closeModal","data-dismiss":"modal"}," Close ",-1);u();const F=R(((t,e,r,n,l,c)=>(a(),o("div",L,[s("div",H,[s("div",$,[q,s("div",M,[s("form",{onSubmit:e[3]||(e[3]=p(((...t)=>n.createBug&&n.createBug(...t)),["prevent"]))},[s("div",z,[V,b(s("input",{type:"text",id:"`bug-title-add",class:"form-control",placeholder:"Bug title...",maxlength:"50",required:"","onUpdate:modelValue":e[1]||(e[1]=t=>n.state.createBug.title=t)},null,512),[[m,n.state.createBug.title]])]),s("div",Y,[G,b(s("input",{type:"text",id:"bug-description-add",class:"form-control",placeholder:"Description...",maxlength:"500",required:"","onUpdate:modelValue":e[2]||(e[2]=t=>n.state.createBug.description=t)},null,512),[[m,n.state.createBug.description]])]),s("div",null,[n.state.createBug?(a(),o("button",K," Save ")):h("",!0),W])],32)])])])]))));U.render=F,U.__scopeId="data-v-62683ed3";var Q=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:U});const J={props:{bug:{type:Object,required:!0}},setup:t=>({account:e((()=>S.account)),createdDate:e((()=>{const e=new Date(t.bug.createdAt);return new Intl.DateTimeFormat("en-US").format(e)})),async closeBug(){try{await O.confirm(title="Are you sure you want to close this bug?",text="You won't be able to revert this!",icon="warning",confirmButtonText="Yes, close it!")&&(await N.closeBug(t.bug.id),O.toast("Closed Bug Successfully","success"))}catch(e){O.toast(e,"error")}}})},X=f("data-v-ce7e55fe");i("data-v-ce7e55fe");const Z={class:"row"},tt={class:"col-md-4 pb-2 pt-3"},et=s("h5",{class:"mobile-on text-dark text-wrap text-break"},[s("b",null,"Title:")],-1),at={class:"d-flex justify-content-center"},ot={class:"text-dark text-wrap text-break pl-2"},st={class:"col-md-4 pb-2 pt-3 text-dark"},rt=s("h5",{class:"mobile-on text-break text-wrap"},[s("b",null,"Reported By:")],-1),nt={class:"text-break text-wrap"},lt={class:"col-md-4 pb-2 pt-3 text-dark"},ct=s("h5",{class:"mobile-on text-break text-wrap"},[s("b",null,"Last Updated:")],-1);u();const it=X(((t,e,r,l,c,i)=>{const u=n("router-link");return a(),o("div",{class:"col-11 bg-light shadow mt-2 pt-2 pb-1 "+(r.bug.closed?"green-border":"red-border")},[s(u,{to:{name:"BugPage",params:{bugId:r.bug.id}},title:`Go to ${r.bug.title} details page`,"aria-label":`Go to ${r.bug.title} details page`},{default:X((()=>[s("div",Z,[s("div",tt,[et,s("div",at,[s("p",ot,v(r.bug.title),1)])]),s("div",st,[rt,s("p",nt,v(r.bug.creator.name),1)]),s("div",lt,[ct,s("p",null,v(l.createdDate),1)])])])),_:1},8,["to","title","aria-label"])],2)}));J.render=it,J.__scopeId="data-v-ce7e55fe";var ut=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:J});const dt={name:"BugThread",props:{bugs:{type:Array,required:!0}}},gt={class:"row justify-content-center py-1 "};dt.render=function(t,e,s,l,c,i){const u=n("BugCard");return a(),o("div",gt,[(a(!0),o(r,null,y(s.bugs,(t=>(a(),o(u,{key:t.id,bug:t},null,8,["bug"])))),128))])};var pt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:dt});const bt={name:"Component",setup(){const e=w(),a=t({bugId:e.params.bugId,editBug:{}});return{state:a,async editBug(){try{await N.editBug(a.editBug,a.bugId),a.editBug={},g("#edit-bug").modal("hide"),O.toast("Edited Bug Successfully","success")}catch(t){O.toast(t,"error")}}}}},mt=f("data-v-335a7342");i("data-v-335a7342");const ht={class:"modal fade",id:"edit-bug",tabindex:"-1",role:"dialog","aria-labelledby":"edit-bug","aria-hidden":"true"},ft={class:"modal-dialog",role:"document"},vt={class:"modal-content"},yt=s("div",{class:"modal-header"},[s("h5",{class:"modal-title"}," Add Bug "),s("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},[s("span",{"aria-hidden":"true"},"×")])],-1),wt={class:"modal-body"},Bt={class:"form-group"},xt=s("label",{class:"pr-2",for:"bug-title"},"Bug Title",-1),_t={class:"form-group"},kt=s("label",{class:"pr-2",for:"bug-description"},"Description",-1),Tt={key:0,type:"submit",class:"btn btn-primary text-dark mr-3"},Et=s("button",{type:"button",class:"btn btn-secondary closeModal","data-dismiss":"modal"}," Close ",-1);u();const Ct=mt(((t,e,r,n,l,c)=>(a(),o("div",ht,[s("div",ft,[s("div",vt,[yt,s("div",wt,[s("form",{onSubmit:e[3]||(e[3]=p(((...t)=>n.editBug&&n.editBug(...t)),["prevent"]))},[s("div",Bt,[xt,b(s("input",{type:"text",id:"bug-title",class:"form-control",placeholder:"Bug title...",maxlength:"50",required:"","onUpdate:modelValue":e[1]||(e[1]=t=>n.state.editBug.title=t)},null,512),[[m,n.state.editBug.title]])]),s("div",_t,[kt,b(s("input",{type:"text",id:"bug-description",class:"form-control",placeholder:"Description...",maxlength:"500",required:"","onUpdate:modelValue":e[2]||(e[2]=t=>n.state.editBug.description=t)},null,512),[[m,n.state.editBug.description]])]),s("div",null,[n.state.editBug.description||n.state.editBug.title?(a(),o("button",Tt," Save ")):h("",!0),Et])],32)])])])]))));bt.render=Ct,bt.__scopeId="data-v-335a7342";var At=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:bt});let St;const It={},Ot=function(t,e){if(!e||0===e.length)return t();if(void 0===St){const t=document.createElement("link").relList;St=t&&t.supports&&t.supports("modulepreload")?"modulepreload":"preload"}return Promise.all(e.map((t=>{if(t in It)return;It[t]=!0;const e=t.endsWith(".css"),a=e?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${t}"]${a}`))return;const o=document.createElement("link");return o.rel=e?"stylesheet":St,e||(o.as="script",o.crossOrigin=""),o.href=t,document.head.appendChild(o),e?new Promise(((t,e)=>{o.addEventListener("load",t),o.addEventListener("error",e)})):void 0}))).then((()=>t()))};function Dt(t){return()=>function(t){switch(t){case"./pages/AccountPage.vue":return Ot((()=>import("./AccountPage.9d575f87.js")),["/assets/AccountPage.9d575f87.js","/assets/AccountPage.f3fa63f7.css","/assets/vendor.4052a4f5.js"]);case"./pages/BugPage.vue":return Ot((()=>import("./BugPage.4c34c143.js")),["/assets/BugPage.4c34c143.js","/assets/BugPage.0dfec1e0.css","/assets/vendor.4052a4f5.js"]);case"./pages/HomePage.vue":return Ot((()=>import("./HomePage.a8405ec0.js")),["/assets/HomePage.a8405ec0.js","/assets/HomePage.e5c9992f.css","/assets/vendor.4052a4f5.js"]);default:return Promise.reject(new Error("Unknown variable dynamic import: "+t))}}(`./pages/${t}.vue`)}const Pt=[{path:"/",name:"Home",component:Dt("HomePage")},{path:"/account",name:"Account",component:Dt("AccountPage"),beforeEnter:_},{path:"/bug/:bugId",name:"BugPage",component:Dt("BugPage")}],jt=B({linkActiveClass:"router-link-active",linkExactActiveClass:"router-link-exact-active",history:x(),routes:Pt});function Nt(t,e){if(D)console[t](`[${t}] :: ${(new Date).toLocaleTimeString()} :: `,...e);else{switch(t){case"log":case"assert":return}console[t](`[${t}] :: ${(new Date).toLocaleTimeString()} :: `,...e)}}const Ut={log(){Nt("log",arguments)},error(){Nt("error",arguments)},warn(){Nt("warn",arguments)},assert(){Nt("assert",arguments)},trace(){Nt("trace",arguments)}};const Rt=new class{async getAccount(){try{const t=await j.get("/account");S.account=t.data}catch(t){Ut.error("HAVE YOU STARTED YOUR SERVER YET???",t)}}};let Lt=!1,Ht=[];const $t="connected",qt="authenticate",Mt="authenticated",zt="error";const Vt=new class extends class{constructor(t=P){this.socket=k(t||P),this.on($t,this.onConnected).on(Mt,this.onAuthenticated).on(zt,this.onError)}on(t,e){return this.socket.on(t,e.bind(this)),this}onConnected(t){Ut.log("[SOCKET_CONNECTION]",t),Lt=!0}onAuthenticated(t){Ut.log("[SOCKET_AUTHENTICATED]",t);const e=[...Ht];Ht=[],e.forEach((t=>{this.emit(t.action,t.payload)}))}authenticate(t){this.socket.emit(qt,t)}onError(t){Ut.error("[SOCKET_ERROR]",t)}emit(t,e){if(!Lt)return Ut.log("[ENQUEING_ACTION]",{action:t,payload:e}),Ht.push({action:t,payload:e});this.socket.emit(t,e)}}{constructor(){super(),this.on("error",this.onError)}onError(t){Ut.error("[SOCKET_ERROR]",t),O.toast(t.message,"error")}},Yt=T({domain:"dev-lh6ggyff.us.auth0.com",clientId:"HzQgoIex6tKEA7CvyOwT0dUlaesDjLt2",audience:"https://Auth-Todo.com",useRefreshTokens:!0,onRedirectCallback:t=>{jt.push(t&&t.targetUrl?t.targetUrl:window.location.pathname)}});async function Gt(t){if(!Yt.isAuthenticated)return t;const e=1e3*Yt.identity.exp,a=e<Date.now(),o=e<Date.now()+432e5;return a?await Yt.loginWithPopup():o&&(await Yt.getTokenSilently(),j.defaults.headers.authorization=Yt.bearer,Vt.authenticate(Yt.bearer)),t}Yt.on(Yt.AUTH_EVENTS.AUTHENTICATED,(async function(){j.defaults.headers.authorization=Yt.bearer,j.interceptors.request.use(Gt),S.user=Yt.user,await Rt.getAccount(),Vt.authenticate(Yt.bearer)}));const Kt={setup:()=>({state:t({dropOpen:!1}),user:e((()=>S.user)),async login(){Yt.loginWithPopup()},async logout(){Yt.logout({returnTo:window.location.origin})}})},Wt=f("data-v-04f3db9e");i("data-v-04f3db9e");const Ft={class:"navbar navbar-expand-lg navbar-dark bg-dark"},Qt=s("div",{class:"d-flex align-items-center"},[s("i",{class:"fas fa-bug fa-2x"}),s("h1",{class:"pl-2 text-break text-wrap",title:"Go Home","aria-label":"Go Home"},"Buglog")],-1),Jt=s("button",{class:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarText","aria-controls":"navbarText","aria-expanded":"false","aria-label":"Toggle navigation",title:"Go Home"},[s("span",{class:"navbar-toggler-icon"})],-1),Xt={class:"collapse navbar-collapse",id:"navbarText"},Zt={class:"navbar-nav mr-auto"},te={class:"nav-item"},ee=E(" Home "),ae={class:"navbar-text"},oe={key:1,class:"dropdown hoverable"},se={class:"mx-3"};u();const re=Wt(((t,e,r,l,c,i)=>{const u=n("router-link");return a(),o("nav",Ft,[s(u,{class:"navbar-brand d-flex",to:{name:"Home"}},{default:Wt((()=>[Qt])),_:1}),Jt,s("div",Xt,[s("ul",Zt,[s("li",te,[s(u,{to:{name:"Home"},class:"nav-link text-grey"},{default:Wt((()=>[ee])),_:1})])]),s("span",ae,[l.user.isAuthenticated?(a(),o("div",oe,[s("div",{class:"dropdown-toggle",onClick:e[2]||(e[2]=t=>l.state.dropOpen=!l.state.dropOpen)},[s("img",{src:l.user.picture,alt:"user photo",height:"40",class:"rounded"},null,8,["src"]),s("span",se,v(l.user.name),1)]),s("div",{class:["dropdown-menu p-0 list-group w-100 hoverable",{show:l.state.dropOpen}],title:"Login/Logout","aria-label":"Login/Logout",onClick:e[4]||(e[4]=t=>l.state.dropOpen=!1)},[s("div",{class:"list-group-item list-group-item-action hoverable",onClick:e[3]||(e[3]=(...t)=>l.logout&&l.logout(...t))}," logout ")],2)])):(a(),o("button",{key:0,class:"btn btn-outline-dark text-grey text-uppercase",onClick:e[1]||(e[1]=(...t)=>l.login&&l.login(...t))}," Login "))])])])}));Kt.render=re,Kt.__scopeId="data-v-04f3db9e";var ne=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Kt});const le=new class{async getNotesByBugId(t){const e=await j.get(`api/bugs/${t}/notes`);S.notes=e.data}async createNote(t){const e=await j.post("api/notes",t);S.notes.push(e.data)}async destroy(t){await j.delete(`api/notes/${t}`),S.notes=S.notes.filter((e=>e.id!==t))}};const ce={props:{note:{type:Object,required:!0}},setup(a){const o=w();return t({bugId:o.params.bugId,createNote:{bugId:o.params.bugId}}),C((async()=>{try{await N.getBugById(o.params.bugId)}catch(t){O.toast(t,"error")}})),{account:e((()=>S.account)),bug:e((()=>S.thisBug)),createdDate:e((()=>{const t=new Date(a.note.createdAt);return new Intl.DateTimeFormat("en-US").format(t)})),async destroy(){try{await O.confirm()&&(await le.destroy(a.note.id),O.toast("Deleted Note Successfully","success"))}catch(t){O.toast(t,"error")}}}}},ie=f("data-v-153ff806");i("data-v-153ff806");const ue={class:"col-11 d-flex flex-column pt-4 pb-1 px-5 my-2 bg-light shadow border-primary rounded-lg"},de={class:"justify-content-between d-flex"},ge={class:"d-flex align-items-end"},pe={class:"pl-2 text-break text-wrap"},be={class:"pt-4 pb-2 text-left text-break text-wrap"};u();const me=ie(((t,e,r,n,l,c)=>(a(),o("div",ue,[s("div",de,[s("div",ge,[s("img",{class:"image-circle text-break text-wrap",src:r.note.creator.picture,alt:r.note.creator.name},null,8,["src","alt"]),s("p",pe,[s("i",null,v(r.note.creator.name),1)])]),s("div",null,[n.bug&&n.account.name===r.note.creator.name&&!n.bug.closed?(a(),o("i",{key:0,class:"fa fa-times fa-lg hoverable pt-2",onClick:e[1]||(e[1]=(...t)=>n.destroy&&n.destroy(...t)),title:"Delete Note","aria-label":"Delete Note"})):h("",!0)])]),s("p",be,v(r.note.body),1)]))));ce.render=me,ce.__scopeId="data-v-153ff806";var he=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:ce});const fe={name:"NoteThread",props:{notes:{type:Array,required:!0}}},ve={class:"row justify-content-center"};fe.render=function(t,e,s,l,c,i){const u=n("NoteCard");return a(),o("div",ve,[(a(!0),o(r,null,y(s.notes,(t=>(a(),o(u,{key:t.id,note:t},null,8,["note"])))),128))])};var ye=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:fe});const we=A(I);!function(t){const e={"./components/AddBugModal.vue":Q,"./components/BugCard.vue":ut,"./components/BugThread.vue":pt,"./components/EditBugModal.vue":At,"./components/Navbar.vue":ne,"./components/NoteCard.vue":he,"./components/NoteThread.vue":ye};Object.entries(e).forEach((([e,a])=>{const o=a.name||e.substr(e.lastIndexOf("/")+1).replace(/\.\w+$/,"");t.component(o,a.default)}))}(we),we.use(jt).mount("#app");export{S as A,O as P,N as b,le as n};
